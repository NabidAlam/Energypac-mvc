@model AuditReport.Models.Project

@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@{
    AuditReport.Models.EPARSDbContext db = new AuditReport.Models.EPARSDbContext();
    var siteList = db.ProjectSite.Where(x => x.ProjectId == Model.Id).ToList();
    var projectResources = db.ProjectResource.Where(x => x.ProjectId == Model.Id).ToList();

}


<div class="row">

        <div class="panel panel-primary border-bottom-blue">
            <div class="panel-heading">
                <h6 class="panel-title">@Html.DisplayFor(model => model.Name)</h6>
                <div class="heading-elements">
                    <ul class="icons-list">
                        <li><a data-action="collapse"></a></li>
                        <li><a data-action="reload"></a></li>
                        <li><a data-action="close"></a></li>
                    </ul>
                </div>
            </div>
            <div class="panel-body">
                @Html.ActionLink("Edit", "Edit", new { id = Model.Id }, new { @class="pull-right btn btn-xs btn-primary"})
                <dl class="dl-horizontal">
                    <dt>
                       Client Name
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.Client.Name)
                    </dd>

                    <dt>
                       Project Group Name
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.ProjectGroup.Name)
                    </dd>

                    <dt>
                       Project Name
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.Name)
                    </dd>

                    <dt>
                       Start Date
                    </dt>

                    <dd>
                        @Html.DateToString(Model.StartDate)
                        
                    </dd>

                    <dt>
                       Finish Date
                    </dt>

                    <dd>
                        @Html.DateToString(Model.EndDate)                        
                    </dd>

                    <dt>
                        @Html.DisplayNameFor(model => model.Status)
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.Status)
                    </dd>

                    <dt>
                        @Html.DisplayNameFor(model => model.Remarks)
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.Remarks)
                    </dd>

                </dl>

                <div class="row">

                    <div class="panel panel-primary border-bottom-blue">
                        <div class="panel-heading">
                            <h6 class="panel-title">Project Staff</h6>
                            <div class="heading-elements">
                                <ul class="icons-list">
                                    <li><a data-action="collapse"></a></li>
                                    <li><a data-action="reload"></a></li>
                                    <li><a data-action="close"></a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="panel-body">
                            <table class="table table-bordered">
                                <tr class="bg-blue">
                                    <th>Name</th>
                                    <th>Position</th>
                                    <th>Phone</th>
                                </tr>

                                @foreach (var item in projectResources)
                                {
                                    var resource = db.CompanyResource.Where(x => x.Id == item.CompanyResourceId).FirstOrDefault();
                                    <tr>
                                        <td>@Html.DisplayFor(model => resource.Name)</td>
                                        <td>@Html.DisplayFor(model => resource.Position)</td>
                                        <td>@Html.DisplayFor(model => resource.Phone)</td>
                                    </tr>

                                }
                            </table>
                        </div>
                    </div>
                </div>

            </div>
            </div>
        </div>








<div class="row">

    <div class="panel panel-success border-bottom-green">
        <div class="panel-heading">
            <h6 class="panel-title">Project Sites</h6>
            <div class="heading-elements">
                <ul class="icons-list">
                    <li><a data-action="collapse"></a></li>
                    <li><a data-action="reload"></a></li>
                    <li><a data-action="close"></a></li>
                </ul>
            </div>
        </div>
        <div class="panel-body">
            @Html.ActionLink("Add Site", "Create", "ProjectSites", new { id = Model.Id }, new { @class = "pull-right btn btn-xs btn-success" })
            <table class="table table-bordered">
                <tr class="bg-green">
                    <th>Site Name</th>
                    <th>Location</th>
                    <th>Status</th>
                    <th></th>
                </tr>

                @foreach (var item in siteList)
                {
                    <tr>
                        <td>@Html.DisplayFor(model => item.Name)</td>
                        <td>@Html.DisplayFor(model => item.Location)</td>
                        <td>@Html.DisplayFor(model => item.SiteStatus)</td>
                        <td>@Html.ActionLink(" ", "Details", "ProjectSites", new { id = item.Id }, new { @class = "btn btn-xs text-info  icon-file-text2", @title = "Details" })|
                        @Html.ActionLink(" ", "Delete", "ProjectSites", new { id = item.Id }, new { @class = "btn btn-xs text-danger icon-cross2", @title = "Delete" })</td>
                 
                     </tr>

                }
            </table>
        </div>
    </div>
</div>






















<p><button type="button" class="btn btn-warning btn-sm" onclick="window.location.href='@Url.Action("Index")';"><i class="icon-circle-left2 position-left"></i> Go back</button></p>
